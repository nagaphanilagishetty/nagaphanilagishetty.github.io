<html>
<body>
<h1>Embed</h1>
<iframe id="wwiframe" src="https://ui.demo.upcp.wirewheel.io/619/welcome" width="100%" height="1500px"></iframe>
<script type="text/javascript">
  window.WireWheelUPCPConfig = {
        'wwupcp_apiurl': 'https://api.demo.upcp.wirewheel.io/v2',
        'wwupcp_apikey': 'eyJicmFuZElkIjoiMkVwMVA1aml6bzJNbHZPZnJkZ3VTTWgxRmJ2IiwiY2hhbm5lbElkIjoiMklnektBOUZDV2liWjU3WmZGamV4eXFMeE5oIiwidGVuYW50SWQiOiI2MzIzOWE3NDFjMGY3YWExYzRhMWE3MmYifQ==',
        'wwupcp_cookie_domain': 'ui.demo.upcp.wirewheel.io',
        'wwupcp_cookie_duration': 365,
        'wwupcp_cmp_default_consents': [
           {
              'target': 'californiaDoNotSell',
              'action': 'ACCEPT'
           },
        ],
     };
</script>
<script type="text/javascript" src="https://unpkg.com/@wirewheelio/cmp-javascript-sdk@0.8.5/dist/wirewheel-sdk.umd.js"></script>
<script type="text/javascript" src="https://ui.uat.upcp.wirewheel.io/extensions/upcp-sdk-bridge-1.3.0.min.js"></script>
<script type="text/javascript">
    // Initializes the Embedded SDK
    const { WireWheelSDK } = window.cmpJavascriptSdk
    const embeddedHandler = WireWheelSDK.initEmbeddedParent({
      targetIframe: document.getElementById("wwiframe")
    })

    WireWheelSDK.registerPrivacyProtocols(
  {
    apiUrl: 'https://api.demo.upcp.wirewheel.io/v2',
    apiKey: 'eyJicmFuZElkIjoiMkVwMVA1aml6bzJNbHZPZnJkZ3VTTWgxRmJ2IiwiY2hhbm5lbElkIjoiMklnektBOUZDV2liWjU3WmZGamV4eXFMeE5oIiwidGVuYW50SWQiOiI2MzIzOWE3NDFjMGY3YWExYzRhMWE3MmYifQ=='
  }
)

    // Listen events in child application
    embeddedHandler.on('login', (message) => {
      logMessage(message)
    })
    embeddedHandler.on('logout', (message) => {
      logMessage(message)
    })

    embeddedHandler.on('consent:write', (message) => {
      const { actions } = message.data  
      logMessage(message)
    })

    function logMessage(message) {
      console.log(message);
    }
  </script>
</body>
</html>
